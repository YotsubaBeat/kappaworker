<p>This webpage hosts a <span onclick="openRepo()">wsProxy server</span></p>
<script>
  const WebSocket = require('ws');
register('sw.cjs',{
    scope: __uv$config.prefix
    });
// Declares itself as a websocket server
const wsServer = new WebSocket.Server({ port: process.env.PORT });
wsServer.on('connection', function(socket){
    // Logs client connection on connect
    console.log((new Date()) + " | Client connected");
    socket.on('message', function(msg){
        // Logs input received from client
        console.log((new Date()) + " | Received input from client: " + "[" + msg + "]");
        // Converts input to a working URL
        const encodedWebSocket = 0;
        if (!isUrl(msg)) {
          encodedWebSocket = 'https://www.google.com/search?q=' + msg;
        } else if (isUrl(msg)) { 
          encodedWebSocket = 'https://' + msg;
        }
        function isUrl(val = val.trim()) {
          if (/^http(s?):\/\//.test(val) || val.includes('.')) 
            return true || false;
        };
        // Responds to websocket with a encoded URL of input
        socket.send(__uv$config.prefix + __uv$config.encodeUrl(encodedWebSocket));
    })
});
// Logs websocket status
console.log((new Date()) + " | Websocket Server opened on port: " + process.env.PORT);

</script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap');
  p {
    font-family: "Ubuntu Mono", monospace;
    font-weight: 400;
    font-style: normal;
  }
  span {
    font-family: "Ubuntu Mono", monospace;
    font-weight: 700;
    font-style: normal;
    cursor: pointer;
  }
</style>
<script>
  function openRepo() {
    window.location.href = "https://github.com/YotsubaBeat/wsProxy";
  }
</script>
